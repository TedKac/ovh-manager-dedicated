<div class="cdn-dedicated-backend-management-component">

    <div data-ng-if="!$ctrl.loaders.translations">

        <oui-field data-label="{{ :: 'cdn_dedicated_backend_management_choice' | translate }}">
            <label class="oui-select">
                <select class="oui-select__input"
                        id="existingBackend"
                        name="existingBackend"
                        data-ng-model="$ctrl.model.existingBackend"
                        data-ng-options="backend === 'new' ? ('cdn_dedicated_backend_management_choice_new' | translate) : backend for backend in $ctrl.availableBackends"
                        data-ng-change="$ctrl.onExistingBackendSelectChange()">
                </select>
                <i class="oui-icon oui-icon-chevron-down"
                   aria-hidden="true">
                </i>
            </label>
        </oui-field>

        <oui-field data-ng-if="$ctrl.model.existingBackend === 'new' && $ctrl.cdnService.backendLimit > ($ctrl.availableBackends.length - 1)"
                   data-label="{{ :: 'cdn_dedicated_backend_management_new' | translate }}"
                   data-error-messages="{ ipv4: ('cdn_dedicated_backend_management_new_bad_format' | translate) }">
            <input class="oui-input"
                   type="text"
                   id="newBackend"
                   name="newBackend"
                   data-ng-model="$ctrl.model.newBackend"
                   data-ng-required="$ctrl.model.existingBackend === 'new'"
                   data-ui-validate="{ ipv4: '$ctrl.Validator.isValidIpv4($value)' }"
                   data-ng-change="$ctrl.ngModel = $ctrl.model.newBackend" />
        </oui-field>

        <div data-ng-if="$ctrl.model.existingBackend === 'new' && $ctrl.cdnService.backendLimit <= ($ctrl.availableBackends.length - 1)">
            <p data-translate="cdn_dedicated_backend_management_full"
               data-translate-values="{ backendOrderSref: 'app.networks.cdn.dedicated.backend.order({ fromState: $ctrl.$state.$current.name })' }"
               data-translate-compile>
            </p>
        </div>

    </div>

</div>

<div data-ng-controller="HousingTaskCtrl as $ctrl">
    <h2 data-i18n-static="housing_tab_task"></h2>
    <div data-ovh-alert='housing_tab_tasks_alert'></div>
    <p data-i18n-static="housing_configuration_no_interventions"></p>
    <oui-datagrid data-rows-loader="$ctrl.loadDatagridTasks($config)"
                  data-row-loader="$ctrl.transformItem($row)">
        <oui-column data-title=":: tr('housing_configuration_task_last_action')">
            <span data-ng-bind="$row.lastUpdate | date: 'medium'"></span>
        </oui-column>
        <oui-column data-title=":: tr('housing_configuration_task_function')">
            <span data-ng-bind="i18n['housing_configuration_task_'+ $row.function] || $row.function"></span>
        </oui-column>
        <oui-column data-title=":: tr('housing_configuration_task_comment')">
            <span data-ng-bind="$row.comment || '-'"></span>
        </oui-column>
        <oui-column data-title=":: tr('housing_configuration_task_status')">
            <span class="label"
                  data-ng-bind="tr('housing_configuration_task_status_'+ $row.status)"
                  data-ng-class="{
                      'label-success': $row.status === $ctrl.TASK_STATUS.DONE.toLowerCase(),
                      'label-info': $row.status === $ctrl.TASK_STATUS.DOING.toLowerCase(),
                      'label-danger': $row.status === $ctrl.TASK_STATUS.OVH_ERROR.toLowerCase() || $row.status === $ctrl.TASK_STATUS.CUSTOMER_ERROR.toLowerCase(),
                      'label-warning': $row.status === $ctrl.TASK_STATUS.INIT.toLowerCase() || $row.status === $ctrl.TASK_STATUS.TODO.toLowerCase()
                  }">
            </span>
        </oui-column>
    </oui-datagrid>
</div>
